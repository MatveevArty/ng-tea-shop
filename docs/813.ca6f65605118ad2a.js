"use strict";(self.webpackChunktea_shop=self.webpackChunktea_shop||[]).push([[813],{4813:(S,d,n)=>{n.r(d),n.d(d,{ProductsModule:()=>F});var i=n(6895),c=n(7599),l=n(8505),t=n(8256),p=n(9334);const m=function(u){return{product:u}};function g(u,e){if(1&u&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"img",5),t.qZA(),t.TgZ(4,"div",6)(5,"h2",7),t._uU(6),t.qZA(),t.TgZ(7,"p",8),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"p",8),t._uU(11),t.qZA(),t.TgZ(12,"div",9)(13,"a",10),t._uU(14,"\u041a\u0443\u043f\u0438\u0442\u044c"),t.qZA()()()()()),2&u){const o=t.oxw();t.xp6(3),t.s9C("src",o.product.image,t.LSH),t.Q6J("alt","\u041d\u0430\u0431\u043e\u0440 \u0447\u0430\u044f "+o.product.id),t.xp6(3),t.Oqu(o.product.title),t.xp6(2),t.Oqu(t.gM2(9,7,o.product.price,"\u20bd","code",".0")),t.xp6(3),t.Oqu(o.product.description),t.xp6(2),t.Q6J("routerLink","/order")("queryParams",t.VKq(12,m,o.product.id))}}function f(u,e){1&u&&(t.TgZ(0,"div",11)(1,"button",12),t._UZ(2,"span",13),t._uU(3," Loading... "),t.qZA()())}let h=(()=>{class u{constructor(o,r,s){this.activatedRoute=o,this.productService=r,this.router=s,this.loading=!1,this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){this.activatedRoute.params.subscribe(o=>{o.id&&(this.loading=!0,this.productService.getProduct(Number(o.id)).pipe((0,l.b)(()=>{this.loading=!1})).subscribe({next:r=>{this.product=r},error:r=>{console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430",r),this.router.navigate(["/"])}}))})}}return u.\u0275fac=function(o){return new(o||u)(t.Y36(c.gz),t.Y36(p.M),t.Y36(c.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-product"]],inputs:{product:"product"},decls:2,vars:2,consts:[["class","card",4,"ngIf"],["class","w-100 text-center",4,"ngIf"],[1,"card"],[1,"card-body","row"],[1,"col","col-12","col-md-6"],[1,"card-img-top",3,"src","alt"],[1,"col","d-flex","flex-column","col-12","col-md-6"],[1,"card-title"],[1,"card-text"],[1,"mt-2","text-center"],[1,"btn","btn-danger","px-5",3,"routerLink","queryParams"],[1,"w-100","text-center"],["type","button","disabled","",1,"btn","btn-primary","px-5","fs-6"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){1&o&&(t.YNc(0,g,15,14,"div",0),t.YNc(1,f,4,0,"div",1)),2&o&&(t.Q6J("ngIf",!r.loading),t.xp6(1),t.Q6J("ngIf",r.loading))},dependencies:[i.O5,c.yS,i.H9]}),u})();var v=n(3900),x=n(8746);let P=(()=>{class u{transform(o,r){return o.length>r?o.slice(0,r)+"...":o}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275pipe=t.Yjl({name:"textLength",type:u,pure:!0}),u})();const Z=function(u){return["/products",u]};let b=(()=>{class u{constructor(){this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-product-card"]],inputs:{product:"product"},decls:15,vars:16,consts:[[1,"col"],[1,"card","h-100"],[1,"card-img-top",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"card-text"],[1,"mt-auto","text-center"],[1,"btn","btn-primary","px-5",3,"routerLink"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"h5",4),t._uU(5),t.qZA(),t.TgZ(6,"p",5),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"p",5),t._uU(10),t.ALo(11,"textLength"),t.qZA(),t.TgZ(12,"div",6)(13,"a",7),t._uU(14,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),t.qZA()()()()()),2&o&&(t.xp6(2),t.s9C("src",r.product.image,t.LSH),t.Q6J("alt","\u041d\u0430\u0431\u043e\u0440 \u0447\u0430\u044f"+r.product.id),t.xp6(3),t.Oqu(r.product.title),t.xp6(2),t.Oqu(t.gM2(8,6,r.product.price,"\u20bd","code",".0")),t.xp6(3),t.Oqu(t.xi3(11,11,r.product.description,170)),t.xp6(3),t.Q6J("routerLink",t.VKq(14,Z,r.product.id)))},dependencies:[c.yS,i.H9,P]}),u})();function y(u,e){1&u&&t._UZ(0,"app-product-card",5),2&u&&t.Q6J("product",e.$implicit)}function C(u,e){1&u&&(t.TgZ(0,"div",6)(1,"button",7),t._UZ(2,"span",8),t._uU(3," Loading... "),t.qZA()())}function T(u,e){1&u&&(t.TgZ(0,"div",9),t._uU(1," \u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u0442\u043e\u0432\u0430\u0440\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b "),t.qZA())}const A=[{path:"",component:(()=>{class u{constructor(o,r,s){this.productService=o,this.router=r,this.route=s,this.loading=!1,this.products=[],this.queryParamsSubscription=null,this.productsSubscription=null}ngOnInit(){this.loading=!0,this.queryParamsSubscription=this.route.queryParams.pipe((0,v.w)(o=>{const r=o.search||"";return this.loading=!0,this.productService.getProducts(r).pipe((0,x.x)(()=>this.loading=!1))})).subscribe({next:o=>{this.products=o},error:o=>{console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432",o),this.router.navigate(["/"])}})}ngOnDestroy(){this.productsSubscription&&this.productsSubscription.unsubscribe(),this.queryParamsSubscription&&this.queryParamsSubscription.unsubscribe()}}return u.\u0275fac=function(o){return new(o||u)(t.Y36(p.M),t.Y36(c.F0),t.Y36(c.gz))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-products"]],decls:6,vars:3,consts:[[1,"text-center","fs-3","fw-bold","my-5"],[1,"row","row-gap-4","row-cols-lg-4","row-cols-md-3","row-cols-sm-2","row-cols-1"],[3,"product",4,"ngFor","ngForOf"],["class","w-100 text-center",4,"ngIf"],["class","no-result text-center w-100",4,"ngIf"],[3,"product"],[1,"w-100","text-center"],["type","button","disabled","",1,"btn","btn-primary","px-5","fs-6"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"no-result","text-center","w-100"]],template:function(o,r){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"\u041d\u0430\u0448\u0438 \u0447\u0430\u0439\u043d\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,y,1,1,"app-product-card",2),t.YNc(4,C,4,0,"div",3),t.YNc(5,T,2,0,"div",4),t.qZA()),2&o&&(t.xp6(3),t.Q6J("ngForOf",r.products),t.xp6(1),t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngIf",0===r.products.length&&!r.loading))},dependencies:[i.sg,i.O5,b]}),u})()},{path:":id",component:h}];let a=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[c.Bz.forChild(A),c.Bz]}),u})();var q=n(5349);let F=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[i.ez,q.m,c.Bz,a,a]}),u})()}}]);