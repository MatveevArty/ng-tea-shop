"use strict";(self.webpackChunktea_shop=self.webpackChunktea_shop||[]).push([[753],{2753:(U,m,l)=>{l.r(m),l.d(m,{OrderModule:()=>J});var a=l(6895),d=l(7599),o=l(433),u=l(8256),s=l(9334);function p(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f "),u.qZA())}function f(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u044b "),u.qZA())}function _(e,n){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,p,2,0,"div",16),u.YNc(2,f,2,0,"div",16),u.qZA()),2&e){const r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==r.name||null==r.name.errors?null:r.name.errors.required),u.xp6(1),u.Q6J("ngIf",null==r.name||null==r.name.errors?null:r.name.errors.pattern)}}function v(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e "),u.qZA())}function g(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0424\u0430\u043c\u0438\u043b\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u044b "),u.qZA())}function C(e,n){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,v,2,0,"div",16),u.YNc(2,g,2,0,"div",16),u.qZA()),2&e){const r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==r.lastName||null==r.lastName.errors?null:r.lastName.errors.required),u.xp6(1),u.Q6J("ngIf",null==r.lastName||null==r.lastName.errors?null:r.lastName.errors.pattern)}}function x(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "),u.qZA())}function Z(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1,' \u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e 11 \u0446\u0438\u0444\u0440, \u0441\u0438\u043c\u0432\u043e\u043b "+" \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u0435\u043d '),u.qZA())}function h(e,n){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,x,2,0,"div",16),u.YNc(2,Z,2,0,"div",16),u.qZA()),2&e){const r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==r.phone||null==r.phone.errors?null:r.phone.errors.required),u.xp6(1),u.Q6J("ngIf",null==r.phone||null==r.phone.errors?null:r.phone.errors.pattern)}}function b(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443 "),u.qZA())}function A(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043d\u0434\u0435\u043a\u0441 "),u.qZA())}function N(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0430\u0434\u0440\u0435\u0441 "),u.qZA())}function I(e,n){1&e&&(u.TgZ(0,"div",28),u._uU(1," \u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 "),u.qZA())}function T(e,n){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,N,2,0,"div",16),u.YNc(2,I,2,0,"div",16),u.qZA()),2&e){const r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==r.address||null==r.address.errors?null:r.address.errors.required),u.xp6(1),u.Q6J("ngIf",null==r.address||null==r.address.errors?null:r.address.errors.minlength)}}function q(e,n){if(1&e){const r=u.EpF();u.TgZ(0,"form",3)(1,"div",4)(2,"div",5)(3,"label",6),u._uU(4,"\u0418\u043c\u044f"),u.qZA(),u._UZ(5,"input",7),u.YNc(6,_,3,2,"div",8),u.qZA(),u.TgZ(7,"div",5)(8,"label",9),u._uU(9,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),u.qZA(),u._UZ(10,"input",10),u.YNc(11,C,3,2,"div",8),u.qZA(),u.TgZ(12,"div",5)(13,"label",11),u._uU(14,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),u.qZA(),u._UZ(15,"input",12),u.YNc(16,h,3,2,"div",8),u.qZA(),u.TgZ(17,"div",13)(18,"label",14),u._uU(19,"\u0421\u0442\u0440\u0430\u043d\u0430"),u.qZA(),u._UZ(20,"input",15),u.YNc(21,b,2,0,"div",16),u.qZA(),u.TgZ(22,"div",13)(23,"label",17),u._uU(24,"\u0418\u043d\u0434\u0435\u043a\u0441"),u.qZA(),u._UZ(25,"input",18),u.YNc(26,A,2,0,"div",16),u.qZA(),u.TgZ(27,"div",19)(28,"label",20),u._uU(29,"\u041f\u0440\u043e\u0434\u0443\u043a\u0442"),u.qZA(),u._UZ(30,"input",21),u.qZA(),u.TgZ(31,"div",19)(32,"label",22),u._uU(33,"\u0410\u0434\u0440\u0435\u0441"),u.qZA(),u._UZ(34,"input",23),u.YNc(35,T,3,2,"div",8),u.qZA(),u.TgZ(36,"div",19)(37,"label",24),u._uU(38,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),u.qZA(),u._UZ(39,"input",25),u.qZA(),u.TgZ(40,"div",26)(41,"button",27),u.NdJ("click",function(){u.CHM(r);const i=u.oxw();return u.KtG(i.sendOrderData())}),u._uU(42,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),u.qZA()()()()}if(2&e){const r=u.oxw();u.Q6J("formGroup",r.orderForm),u.xp6(5),u.Q6J("formControlName","name"),u.xp6(1),u.Q6J("ngIf",(null==r.name?null:r.name.invalid)&&((null==r.name?null:r.name.touched)||(null==r.name?null:r.name.dirty))),u.xp6(4),u.Q6J("formControlName","last_name"),u.xp6(1),u.Q6J("ngIf",(null==r.lastName?null:r.lastName.invalid)&&((null==r.lastName?null:r.lastName.touched)||(null==r.lastName?null:r.lastName.dirty))),u.xp6(4),u.Q6J("formControlName","phone"),u.xp6(1),u.Q6J("ngIf",(null==r.phone?null:r.phone.invalid)&&((null==r.phone?null:r.phone.touched)||(null==r.phone?null:r.phone.dirty))),u.xp6(4),u.Q6J("formControlName","country"),u.xp6(1),u.Q6J("ngIf",(null==r.country?null:r.country.invalid)&&((null==r.country?null:r.country.touched)||(null==r.country?null:r.country.dirty))&&(null==r.country||null==r.country.errors?null:r.country.errors.required)),u.xp6(4),u.Q6J("formControlName","zip"),u.xp6(1),u.Q6J("ngIf",(null==r.zip?null:r.zip.invalid)&&((null==r.zip?null:r.zip.touched)||(null==r.zip?null:r.zip.dirty))&&(null==r.zip||null==r.zip.errors?null:r.zip.errors.required)),u.xp6(4),u.Q6J("formControlName","product"),u.xp6(4),u.Q6J("formControlName","address"),u.xp6(1),u.Q6J("ngIf",(null==r.address?null:r.address.invalid)&&((null==r.address?null:r.address.touched)||(null==r.address?null:r.address.dirty))),u.xp6(4),u.Q6J("formControlName","comment"),u.xp6(2),u.Q6J("disabled",r.orderForm.invalid||r.orderForm.untouched)}}function y(e,n){1&e&&(u.TgZ(0,"div",29),u._uU(1," \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437. \u041c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f!\n"),u.qZA())}const O=[{path:"",component:(()=>{class e{constructor(r,t,i,E){this.productService=r,this.fb=t,this.activatedRoute=i,this.router=E,this.backendResponse=null,this.currentProduct=null,this.orderForm=this.fb.group({name:["",[o.kI.required,o.kI.pattern("^[\u0430-\u044f\u0410-\u042f]+$")]],last_name:["",[o.kI.required,o.kI.pattern("^[\u0430-\u044f\u0410-\u042f]+$")]],phone:["",[o.kI.required,o.kI.pattern(/^\+?\d{11}$/)]],country:["",o.kI.required],zip:["",o.kI.required],product:[{value:"",disabled:!0},o.kI.required],address:["",[o.kI.required,o.kI.minLength(10)]],comment:[""]})}get name(){return this.orderForm.get("name")}get lastName(){return this.orderForm.get("last_name")}get phone(){return this.orderForm.get("phone")}get country(){return this.orderForm.get("country")}get zip(){return this.orderForm.get("zip")}get address(){return this.orderForm.get("address")}ngOnInit(){this.activatedRoute.queryParams.subscribe(r=>{r.product&&this.productService.getProduct(Number(r.product)).subscribe({next:t=>{this.currentProduct=t,this.orderForm.get("product")?.setValue(this.currentProduct.title),this.orderForm.get("product")?.disable()},error:t=>{console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430",t),this.router.navigate(["/"])}})})}sendOrderData(){if(this.orderForm.invalid)return;const r=this.orderForm.getRawValue();this.productService.createOrder(r).subscribe({next:t=>{console.log(t),this.backendResponse=t},error:t=>{console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",t),this.router.navigate(["/"])}})}}return e.\u0275fac=function(r){return new(r||e)(u.Y36(s.M),u.Y36(o.qu),u.Y36(d.gz),u.Y36(d.F0))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-order"]],decls:4,vars:2,consts:[[1,"text-center","fs-3","fw-bold","my-5"],["class","col-lg-6 row g-3 mb-4 mx-auto",3,"formGroup",4,"ngIf"],["id","approved","class","text-center col-lg-10 mx-auto p-4 bg-success-subtle border border-black rounded",4,"ngIf"],[1,"col-lg-6","row","g-3","mb-4","mx-auto",3,"formGroup"],[1,"row"],[1,"col-md-4"],["for","nameInput",1,"form-label"],["type","text","id","nameInput",1,"form-control","form-input",3,"formControlName"],[4,"ngIf"],["for","lastnameInput",1,"form-label"],["type","text","id","lastnameInput",1,"form-control","form-input",3,"formControlName"],["for","phoneInput",1,"form-label"],["type","text","id","phoneInput",1,"form-control","form-input",3,"formControlName"],[1,"col-md-6"],["for","countryInput",1,"form-label"],["type","text","id","countryInput",1,"form-control","form-input",3,"formControlName"],["class","invalid-feedback",4,"ngIf"],["for","zipInput",1,"form-label"],["type","text","id","zipInput",1,"form-control","form-input",3,"formControlName"],[1,"col-md-12"],["for","productInput",1,"form-label"],["type","text","id","productInput",1,"form-control","form-input",3,"formControlName"],["for","addressInput",1,"form-label"],["type","text","id","addressInput",1,"form-control","form-input",3,"formControlName"],[1,"form-label"],["type","text",1,"form-control","form-input",3,"formControlName"],[1,"col-12","mt-3","text-center"],[1,"btn","btn-primary","px-5",3,"disabled","click"],[1,"invalid-feedback"],["id","approved",1,"text-center","col-lg-10","mx-auto","p-4","bg-success-subtle","border","border-black","rounded"]],template:function(r,t){1&r&&(u.TgZ(0,"h2",0),u._uU(1,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),u.qZA(),u.YNc(2,q,43,16,"form",1),u.YNc(3,y,2,0,"div",2)),2&r&&(u.xp6(2),u.Q6J("ngIf",!(null!=t.backendResponse&&t.backendResponse.success)),u.xp6(1),u.Q6J("ngIf",null==t.backendResponse?null:t.backendResponse.success))},dependencies:[a.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["input.ng-invalid.ng-dirty[_ngcontent-%COMP%], input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}.invalid-feedback[_ngcontent-%COMP%]{display:block}"]}),e})()}];let c=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[d.Bz.forChild(O),d.Bz]}),e})();var F=l(5349);let J=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[a.ez,F.m,c,o.UX,c]}),e})()}}]);